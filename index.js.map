{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const createGalleryCardTemplate = imgInfo => {\n \n  return `\n    <li class=\"gallery-card\"><a href=\"${imgInfo.largeImageURL}\">\n      <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" title=\"\"/></a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b> ${imgInfo.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b> ${imgInfo.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b> ${imgInfo.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b> ${imgInfo.downloads}\n        </p>\n      </div>\n    </li>\n  `;\n};","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const searchParams = new URLSearchParams({\n   \n      key: '48293498-9bc96457b3129dac42cff7415',\n      q: searchedQuery,\nimage_type: 'photo',\norientation: 'horizontal',\n      safesearch: 'true',\n       page: currentPage,\nper_page: 15,\n  });\n    \n   return axios.get(`https://pixabay.com/api/?${searchParams}`)\n    \n};","import { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\n\nlet page = 1;\nlet searchedQuery = '';\nlet totalPages = 0;\nconst loaderEl = document.querySelector('.loader');\n\nconst showLoader = () => {\n  loaderEl.style.display = 'block';\n};\n\nconst  hideLoader = () => {\n  loaderEl.style.display = 'none';\n};\n\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst smoothScrool = () => {\n    const cardHeight = galleryEl.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n};\n\n\nconst onSearchFormSubmit = async event => {  event.preventDefault();\n    showLoader();\n    try{\n      \n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n        hideLoader();\n        iziToast.show({\n            backgroundColor: '#ef4040',\n            messageColor: '#fff',\n            message: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#FFFFFF\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM17 15.74L15.74 17 12 13.26 8.26 17 7 15.74 10.74 12 7 8.26 8.26 7 12 10.74 15.74 7 17 8.26 13.26 12 17 15.74z\"/></svg> Поле має бути заповнено!',\n            close: 'true',\n            \n\n        });\n\n        return;\n    }\n page = 1;\n\n        loadMoreBtnEl.classList.add('is-hidden');\n        const { data } = await fetchPhotosByQuery(searchedQuery, page);\n         if (data.total === 0) {\n                hideLoader();\n                iziToast.show({\n                    backgroundColor: '#ef4040',\n                    messageColor: '#fff',\n                    message: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" ><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM17 15.74L15.74 17 12 13.26 8.26 17 7 15.74 10.74 12 7 8.26 8.26 7 12 10.74 15.74 7 17 8.26 13.26 12 17 15.74z\"/></svg>  Sorry, there are no images matching your search query. Please try again!',\n                    close: 'true',\n\n                    iconColor: '#fff',\n                });\n        \n\n                galleryEl.innerHTML = '';\n                searchFormEl.reset();\n       \n\n                return;\n            }\ntotalPages = Math.ceil(data.totalHits / 15);\n        if (totalPages > 1) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n            galleryEl.innerHTML = '';\n            const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\nhideLoader();\n            galleryEl.innerHTML = galleryTemplate;\n            lightbox.refresh();\n        searchFormEl.reset();\n          \n} catch(err) {\n            console.log(err);\n} finally {hideLoader();}\n       \n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nconst onLoadMoreBtnClick = async () => {  showLoader();\n        page++;\n    try {\n       \n      \n        const { data } = await fetchPhotosByQuery(searchedQuery, page);\n        const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n       \n        galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n        lightbox.refresh();\n        smoothScrool();\n        if (page >= totalPages) {\n            loadMoreBtnEl.classList.add('is-hidden');\n\n            loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n            iziToast.show({\n                    backgroundColor: '#ef4040',\n                    messageColor: '#fff',\n                    message: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" ><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM17 15.74L15.74 17 12 13.26 8.26 17 7 15.74 10.74 12 7 8.26 8.26 7 12 10.74 15.74 7 17 8.26 13.26 12 17 15.74z\"/></svg> We are sorry, but you have reached the end of search results.',\n                    close: 'true',\n\n                    iconColor: '#fff',\n                });\n        }    \n    }catch(err) {\n            console.log(err);\n} finally {hideLoader();}\n       \n};\n"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","searchParams","axios","page","totalPages","loaderEl","showLoader","hideLoader","searchFormEl","galleryEl","loadMoreBtnEl","lightbox","SimpleLightbox","smoothScrool","cardHeight","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err"],"mappings":"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"}